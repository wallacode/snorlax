!function(t){"use strict";function e(t){for(;g&&d.length;)if(f(),p.horizontal){if(!(d[0].left-p.threshold<t))return;n(d[0]),d.shift()}else{if(!(d[0].top-p.threshold<t))return;n(d[0]),d.shift()}}function n(t){var e,n;if(t.cb&&(n=window[t.cb](t)),!t.cb||n){"img"===t.type?(e=new Image,e.src=n||t.src,e.alt=t.alt,e.setAttribute("class","snorlax-loaded")):(e=document.createElement("iframe"),e.src=t.src),e.setAttribute("class",t.el.getAttribute("class").replace(p.cssClassPrefix,p.cssClassPrefix+"-loaded"));var r=t.el.dataset||l(t.el),o=p.attrPrefix.replace(/^data-/,"").replace(/-/g,"");for(var a in r)r.hasOwnProperty(a)&&-1===[o+"src",o+"alt",o+"cb"].indexOf(a.toLowerCase())&&(e.dataset?e.dataset[a]=r[a]:e.setAttribute("data-"+a.replace(/[a-z][A-Z][a-z]/g,function(t,e){return t.substr(0,1)+"-"+t.substr(1).toLowerCase()}),r[a]));"img"===t.type?e.onload=function(){t.el.parentNode.insertBefore(e,t.el),t.el.style.display="none"}:(t.el.parentNode.insertBefore(e,t.el),t.el.style.display="none")}}function r(){var e=t.innerHeight||document.documentElement.clientHeight;return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop+e:document.body.scrollTop+e}function o(){var t=document.getElementById(p.wrap).parentElement;return t.scrollLeft+1*window.getComputedStyle(t).width.replace("px","")}function a(t){return{el:t,top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left,src:t.getAttribute(p.attrPrefix+"-src"),alt:t.getAttribute(p.attrPrefix+"-alt"),cb:t.getAttribute(p.attrPrefix+"-cb"),type:/^https?:\/\/(?:[a-z\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)$/.test(t.getAttribute(p.attrPrefix+"-src"))?"img":"iframe"}}function l(t){for(var e={},n=0;n<t.attributes.length;n++){var r=t.attributes[n];r.specified&&r.name.match(/^data-/)&&r.name.match(/^data-./).length>0&&(e[r.name.replace(/^data-/,"").replace(/-./g,function(t,e){return t.charAt(1).toUpperCase()})]=r.value)}return e}function i(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function s(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,n)}function c(t){return document.getElementsByClassName?document.getElementsByClassName(t):document.querySelectorAll("."+t)}function u(){Array.prototype.indexOf=function(t,e){void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0);for(var n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1}}function f(){d.length&&(d[0].top=d[0].el.getBoundingClientRect().top,d[0].left=d[0].el.getBoundingClientRect().left)}var d=[],p={threshold:600,attrPrefix:"data-snorlax",cssClassPrefix:"snorlax",loadDelta:1e3,event:"scroll",horizontal:!1,wrap:""},g=!0;t.Snorlax=function(n){n&&this.refreshConfig(n);var l;if("indexOf"in Array.prototype||u(),l=c(p.cssClassPrefix),d=i(l),p.horizontal){for(var f=document.getElementById(p.wrap),g=0;g<d.length;g++)d[g]=a(d[g]);var h=o(),m=function(){var t=o();e(t)};s(f.parentElement,p.event,m),e(h)}else{for(var g=0;g<d.length;g++)d[g]=a(d[g]);var h=r(),m=function(){var t=r();t+p.loadDelta>=h&&(h=t,e(t))};s(t,p.event,m),e(h)}},t.Snorlax.prototype.loadAll=function(){for(;d.length;)n(d[0]),d.shift()},t.Snorlax.prototype.refreshConfig=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)p[e[n]]=t[e[n]]},t.Snorlax.prototype.start=function(){g=!0},t.Snorlax.prototype.stop=function(){g=!1}}(window);