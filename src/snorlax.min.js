!function(e){"use strict";function t(e){for(;i&&a.length;)if(s.horizontal){if(!(a[0].left-s.threshold<e))return;r(a[0]),a.shift()}else{if(!(a[0].top-s.threshold<e))return;r(a[0]),a.shift()}}function r(e){var t;e.cb?window[e.cb](e):("img"===e.type?(t=new Image,t.src=e.src,t.alt=e.alt,t.setAttribute("class","snorlax-loaded")):(t=document.createElement("iframe"),t.src=e.src),t.setAttribute("class",e.el.getAttribute("class").replace(s.cssClassPrefix,s.cssClassPrefix+"-loaded")),"img"===e.type?t.onload=function(){e.el.parentNode.insertBefore(t,e.el),e.el.style.display="none"}:(e.el.parentNode.insertBefore(t,e.el),e.el.style.display="none"))}function n(){return document.body.scrollTop+e.innerHeight}function l(){var e=document.getElementById(s.wrap).parentElement;return e.scrollLeft+1*window.getComputedStyle(e).width.replace("px","")}function o(e){return{el:e,top:e.getBoundingClientRect().top,left:e.getBoundingClientRect().left,src:e.getAttribute(s.attrPrefix+"-src"),alt:e.getAttribute(s.attrPrefix+"-alt"),cb:e.getAttribute(s.attrPrefix+"-cb"),type:/^https?:\/\/(?:[a-z\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)$/.test(e.getAttribute(s.attrPrefix+"-src"))?"img":"iframe"}}var a=[],s={threshold:400,attrPrefix:"data-snorlax",cssClassPrefix:"snorlax",loadDelta:1e3,event:"scroll",horizontal:!1,wrap:""},i=!0;e.Snorlax=function(r){if(r&&this.refreshConfig(r),s.horizontal){var i=document.getElementById(s.wrap);a=[].slice.call(i.getElementsByClassName(s.cssClassPrefix)).map(o);var c=l();i.parentElement.addEventListener(s.event,function(){var e=l();t(e)}),t(c)}else{a=[].slice.call(document.getElementsByClassName(s.cssClassPrefix)).map(o);var c=n();e.addEventListener(s.event,function(){var e=n();e+s.loadDelta<c||(c=e,t(e))}),t(c)}},e.Snorlax.prototype.loadAll=function(){for(;a.length;)r(a[0]),a.shift()},e.Snorlax.prototype.refreshConfig=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)s[t[r]]=e[t[r]]},e.Snorlax.prototype.start=function(){i=!0},e.Snorlax.prototype.stop=function(){i=!1}}(window);