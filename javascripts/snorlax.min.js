!function(t){"use strict";function e(t){for(;i&&o.length;)if(s.horizontal){if(!(o[0].left-s.threshold<t))return;r(o[0]),o.shift()}else{if(!(o[0].top-s.threshold<t))return;r(o[0]),o.shift()}}function r(t){var e;t.cb?window[t.cb](t):("img"===t.type?(e=new Image,e.src=t.src,e.alt=t.alt,e.setAttribute("class","snorlax-loaded")):(e=document.createElement("iframe"),e.src=t.src),e.setAttribute("class",t.el.getAttribute("class").replace(s.cssClassPrefix,s.cssClassPrefix+"-loaded")),t.el.parentNode.insertBefore(e,t.el),t.el.parentNode.removeChild(t.el))}function n(){return document.body.scrollTop+t.innerHeight}function l(){var t=document.getElementById(s.wrap).parentElement;return t.scrollLeft+1*window.getComputedStyle(t).width.replace("px","")}function a(t){return{el:t,top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left,src:t.getAttribute(s.attrPrefix+"-src"),alt:t.getAttribute(s.attrPrefix+"-alt"),cb:t.getAttribute(s.attrPrefix+"-cb"),type:/^https?:\/\/(?:[a-z\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)$/.test(t.getAttribute(s.attrPrefix+"-src"))?"img":"iframe"}}var o=[],s={threshold:400,attrPrefix:"data-snorlax",cssClassPrefix:"snorlax",loadDelta:1e3,event:"scroll",horizontal:!1,wrap:""},i=!0;t.Snorlax=function(r){if(r&&this.refreshConfig(r),s.horizontal){var i=document.getElementById(s.wrap);o=[].slice.call(i.getElementsByClassName(s.cssClassPrefix)).map(a);var c=l();i.parentElement.addEventListener(s.event,function(){var t=l();e(t)}),e(c)}else{o=[].slice.call(document.getElementsByClassName(s.cssClassPrefix)).map(a);var c=n();t.addEventListener(s.event,function(){var t=n();t+s.loadDelta<c||(c=t,e(t))}),e(c)}},t.Snorlax.prototype.loadAll=function(){for(;o.length;)r(o[0]),o.shift()},t.Snorlax.prototype.refreshConfig=function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)s[e[r]]=t[e[r]]},t.Snorlax.prototype.start=function(){i=!0},t.Snorlax.prototype.stop=function(){i=!1}}(window);